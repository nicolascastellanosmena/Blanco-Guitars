<!-- Listado de Guitarras -->
<div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
      aria-current="true" aria-label="foto1"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="foto2"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="foto3"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="carousel1.jpg" class="d-block w-100" alt="foto1">
      <button class="btn btn-outline-white position-absolute bottom-0 start-50 translate-middle-x mt-3"
        (click)="scrollToGuitarras()">COMPRAR</button>
    </div>
    <div class="carousel-item">
      <img src="carousel2.jpg" class="d-block w-100" alt="foto3">
      <h1 class="position-absolute bottom-0 end-0 mb-5 me-4 text-white"
        style="font-size: 2.5rem; text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);">
        <span class="d-block text-center">Invierte en calidad y rendimiento, </span>
        <span class="d-block text-center">elige tu guitarra artesanal hoy mismo.</span>
      </h1>
    </div>
    <div class="carousel-item">
      <img src="carousel4.jpg" class="d-block w-100" alt="foto5">
      <h1 class="position-absolute top-0 end-0 mt-4 me-4 text-white"
        style="font-size: 2.5rem; text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);">
        <span class="d-block text-center">Blanco Guitars: Calidad y precisión</span>
        <span class="d-block text-center">en cada detalle, para músicos exigentes.</span>
      </h1>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Anterior</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Siguiente</span>
  </button>
</div>

@defer (when guitarra) {
<div class="container-fluid d-flex px-5">
  <!-- <aside class="mt-5" style="border: 1px solid; border-radius: 8px; padding: 6px; height: 25%; box-shadow: 5px 5px 10px rgba(0,0,0,0.3);">  
      <h4>¿Cuánto quieres pagar?</h4>
      <mat-slider (change)="onChange()" class=" mr-2" [min]="minimo()" [max]="maximo()" style="width: 15em;" step="1" showTickMarks discrete [displayWith]="formatLabel">
        <input  [value]="minimo()" matSliderStartThumb>
        <input  [value]="maximo()"  matSliderEndThumb>
      </mat-slider>
    </aside> -->

  <div id="guitarras-section" class="container mt-5 mb-5 p-0">
    <div class="row justify-content-start mx-auto" style="max-width: 1140px; width: 100%;">

      @for (guitar of guitarra; track guitar._id) {
      <div class="col-12 col-sm-6 col-md-4 mb-3">
        <div class="card h-100 shadow border-0"
          style="background: linear-gradient(rgb(102, 102, 102), rgb(61, 61, 61)) 33% center; border-radius: 8px;">
          <h5 class="card-title text-light" style="margin-left: 15px; margin-top: 5px;">{{guitar.name}}</h5>
          <div class="image-container">
            <img routerLink="/producto/{{guitar._id}}" class="card-img-top"
              [src]="guitar.image[currentImage[guitarra.indexOf(guitar)]]" alt="Imagen de {{guitar.name}}" />
            <div class="image-nav">
              <button class="prev" (click)="changeImage('prev', guitar)">&#10094;</button>
              <button class="next" (click)="changeImage('next', guitar)">&#10095;</button>
            </div>
          </div>
          <div class="card-body">
            <p class="card-brand text-light"><strong> Categoría: </strong>{{guitar.type}}</p>
          </div>
          <div class="card-footer">
            <div class="d-flex justify-content-between align-items-center">
              <span class="badge bg-primary d-flex align-items-center">
                {{guitar.rating}}
                <i class="fa-solid fa-star ms-1"></i>
              </span>
              <strong class="text-primary mb-0">{{guitar.price | currency: 'EUR'}}</strong>
            </div>
            <div class="d-flex justify-content-end">
              <button class="carrito" style=" background-color: transparent;"
                (click)="addToCart(guitar); showSuccessToast(guitar.name)">
                <fa-icon [icon]="faCartShopping" style="color: #ffc107;"></fa-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
</div>

}

@placeholder {
<div class="d-flex justify-content-center align-items-center" style="height: 100vh;">
  <img src="loading.webp" alt="loader">
</div>
}

@loading (minimum 1s) {
<div class="d-flex justify-content-center align-items-center" style="height: 100vh;">
  <img src="loading.webp" alt="loader">
</div>
}